<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Cek Status Nomor Tri</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Arial, sans-serif;
    background: #f2f4f7;
    padding: 20px;
}
.container {
    max-width: 900px;
    margin: auto;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
}
textarea {
    width: 100%;
    height: 200px;
    padding: 10px;
    font-size: 14px;
}
button {
    margin-top: 10px;
    padding: 10px 15px;
    background: #0070f3;
    color: #fff;
    border: none;
    cursor: pointer;
}
button:hover {
    background: #0059c1;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}
th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
}
th {
    background: #0070f3;
    color: #fff;
}
.duplikat {
    background: #ffe5e5;
    color: red;
    font-weight: bold;
}
.info {
    margin-top: 10px;
    font-weight: bold;
}
</style>
</head>

<body>
<div class="container">
<h1>Cek Status Nomor Tri</h1>

<textarea id="nomor" placeholder="0895330106330
0895330106330
085712345678"></textarea>

<button onclick="cekNomor()">Cek Nomor</button>

<div id="info" class="info"></div>
<div id="hasil"></div>
</div>

<script>
function cekNomor() {
    const textarea = document.getElementById("nomor");
    const hasilDiv = document.getElementById("hasil");
    const infoDiv = document.getElementById("info");

    let lines = textarea.value.split("\n");

    let countMap = {};
    let allNumbers = [];
    let uniqueNumbers = [];
    let uniqueSet = new Set();

    // NORMALISASI
    lines.forEach(nomor => {
        nomor = nomor.trim();
        if (!nomor) return;

        nomor = nomor.replace(/\D/g, "");

        if (nomor.startsWith("08")) {
            nomor = "62" + nomor.substring(1);
        }

        allNumbers.push(nomor);
        countMap[nomor] = (countMap[nomor] || 0) + 1;

        if (!uniqueSet.has(nomor)) {
            uniqueSet.add(nomor);
            uniqueNumbers.push(nomor);
        }
    });

    // TEXTAREA â†’ HANYA NOMOR UNIK
    textarea.value = uniqueNumbers.join("\n");

    // TABEL HASIL (MENAMPILKAN DUPLIKAT)
    let html = `
        <table>
        <tr>
            <th>No</th>
            <th>Nomor</th>
            <th>Status</th>
        </tr>
    `;

    let duplikatCount = 0;

    allNumbers.forEach((nomor, index) => {
        const isDuplikat = countMap[nomor] > 1;
        if (isDuplikat) duplikatCount++;

        html += `
        <tr class="${isDuplikat ? 'duplikat' : ''}">
            <td>${index + 1}</td>
            <td>${nomor}</td>
            <td>${isDuplikat ? 'DUPLIKAT (DIHAPUS)' : 'UNIK'}</td>
        </tr>
        `;
    });

    html += `</table>`;

    hasilDiv.innerHTML = html;
    infoDiv.innerHTML = `
        Total input: ${allNumbers.length} |
        Nomor unik: ${uniqueNumbers.length} |
        Duplikat dihapus: ${duplikatCount}
    `;
}
</script>
</body>
</html>
